

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setup &mdash; CRUDlex 0.15.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.10/segment.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.10/menu.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.10/tab.min.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="CRUDlex 0.15.0 documentation" href="../index.html"/>
        <link rel="next" title="Data Structure Definition" href="datastructures.html"/>
        <link rel="prev" title="Introduction" href="introduction.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> CRUDlex
          

          
          </a>

          
            
            
              <div class="version">
                0.15.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="datastructures.html">Data Structure Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="datatypes.html">Data Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="constraints.html">Constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="filehandling.html">File Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="layouts.html">Overriding Layouts</a></li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">Overriding Templates</a></li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimisticlocking.html">Optimistic Locking</a></li>
<li class="toctree-l1"><a class="reference internal" href="definitionvalidation.html">Definition Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="routes.html">Routes</a></li>
<li class="toctree-l1"><a class="reference internal" href="extendedfeatures.html">Extended Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="addons.html">Addons</a></li>
<li class="toctree-l1"><a class="reference internal" href="crudyamlreference.html">CRUD YAML Reference</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/AbstractData.html">CRUDlex\AbstractData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/ControllerInterface.html">CRUDlex\ControllerInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/DataFactoryInterface.html">CRUDlex\DataFactoryInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/Entity.html">CRUDlex\Entity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/EntityDefinition.html">CRUDlex\EntityDefinition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/EntityDefinitionFactoryInterface.html">CRUDlex\EntityDefinitionFactoryInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/EntityDefinitionValidatorInterface.html">CRUDlex\EntityDefinitionValidatorInterface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/EntityEvents.html">CRUDlex\EntityEvents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/EntityValidator.html">CRUDlex\EntityValidator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/FileHandler.html">CRUDlex\FileHandler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/ManyValidator.html">CRUDlex\ManyValidator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/ReferenceValidator.html">CRUDlex\ReferenceValidator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/Service.html">CRUDlex\Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/StreamedFileResponse.html">CRUDlex\StreamedFileResponse</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/TwigExtensions.html">CRUDlex\TwigExtensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/UniqueValidator.html">CRUDlex\UniqueValidator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/YamlReader.html">CRUDlex\YamlReader</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">CRUDlex</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Setup</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/manual/setup.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setup">
<h1>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">Â¶</a></h1>
<p>This chapter guides you through a minimal setup. Further options like overriding
templates are discussed in later sections.</p>
<p>First, you have to add CRUDlex to your composer.json:</p>
<div class="sphinx-tabs container">
<div class="ui top attached tabular menu sphinx-menu container">
<div class="active item sphinx-data-tab-U3ltZm9ueSA0 container">
<div class="container">
Symfony 4</div>
</div>
<div class="item sphinx-data-tab-U2lsZXggMg== container">
<div class="container">
Silex 2</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U3ltZm9ueSA0 active container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>composer require <span class="s2">&quot;philiplb/crudlexsymfony4bundle&quot;</span>
</pre></div>
</div>
<p>One of the requirements is unfortunately not stable so this has to be added to your composer.json:</p>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;minimum-stability&quot;</span><span class="o">:</span> <span class="s2">&quot;dev&quot;</span><span class="p">,</span>
<span class="s2">&quot;prefer-stable&quot;</span><span class="o">:</span> <span class="kc">true</span> <span class="p">,</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U2lsZXggMg== container">
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>composer require <span class="s2">&quot;philiplb/crudlexsilex2&quot;</span>
</pre></div>
</div>
</div>
</div>
<p>Then comes the actual setup. Currently, only MySQL is supported. Although the
database layer is kept in an abstract way, so in future more data stores will
come. It relies on the DoctrineServiceProvider which has to be initialized and
registered:</p>
<div class="sphinx-tabs container">
<div class="ui top attached tabular menu sphinx-menu container">
<div class="active item sphinx-data-tab-U3ltZm9ueSA0 container">
<div class="container">
Symfony 4</div>
</div>
<div class="item sphinx-data-tab-U2lsZXggMg== container">
<div class="container">
Silex 2</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U3ltZm9ueSA0 active container">
<p>Assuming you are using the .env configuration:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">DATABASE_URL=mysql://&lt;yourDBUser&gt;:&lt;yourDBPassword&gt;@&lt;yourHost&gt;/&lt;yourDBName&gt;</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U2lsZXggMg== container">
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$app-&gt;register(new Silex\Provider\DoctrineServiceProvider(), [</span>
<span class="x">    &#39;dbs.options&#39; =&gt; [</span>
<span class="x">        &#39;default&#39; =&gt; [</span>
<span class="x">            &#39;host&#39; =&gt; &#39;&lt;yourHost&gt;&#39;,</span>
<span class="x">            &#39;dbname&#39; =&gt; &#39;&lt;yourDBName&gt;&#39;,</span>
<span class="x">            &#39;user&#39; =&gt; &#39;&lt;yourDBUser&gt;&#39;,</span>
<span class="x">            &#39;password&#39; =&gt; &#39;&lt;yourDBPassword&gt;&#39;,</span>
<span class="x">            &#39;charset&#39; =&gt; &#39;utf8&#39;,</span>
<span class="x">        ]</span>
<span class="x">    ]</span>
<span class="x">]);</span>
</pre></div>
</div>
</div>
</div>
<p>Now follows the setup of CRUDlex itself. First of all, we create an instance
of the MySQLDataFactory, internally taking care of creating MySQL-DB-access
objects:</p>
<div class="sphinx-tabs container">
<div class="ui top attached tabular menu sphinx-menu container">
<div class="active item sphinx-data-tab-U3ltZm9ueSA0 container">
<div class="container">
Symfony 4</div>
</div>
<div class="item sphinx-data-tab-U2lsZXggMg== container">
<div class="container">
Silex 2</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U3ltZm9ueSA0 active container">
<p>This is already setup with the default DBAL connection within the services and can be overwritten within the
<em>config/services.yaml</em>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">crudlex.dataFactoryInterface</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">public</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">class</span><span class="p p-Indicator">:</span> <span class="s">&quot;CRUDlex\\MySQLDataFactory&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">arguments</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;@doctrine.dbal.default_connection&quot;</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U2lsZXggMg== container">
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$dataFactory = new CRUDlex\MySQLDataFactory($app[&#39;db&#39;]);</span>
</pre></div>
</div>
</div>
</div>
<p>Now itâs time to register the Service itself:</p>
<div class="sphinx-tabs container">
<div class="ui top attached tabular menu sphinx-menu container">
<div class="active item sphinx-data-tab-U3ltZm9ueSA0 container">
<div class="container">
Symfony 4</div>
</div>
<div class="item sphinx-data-tab-U2lsZXggMg== container">
<div class="container">
Silex 2</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U3ltZm9ueSA0 active container">
<p>This is the default setup of the service you are able to overwrite within the <em>config/services.yaml</em>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">crudlex.service</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">public</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class="l l-Scalar l-Scalar-Plain">class</span><span class="p p-Indicator">:</span> <span class="s">&quot;CRUDlex\\Service&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">arguments</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;%kernel.project_dir%/config/crud.yml&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;%kernel.cache_dir%&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;@Symfony\\Component\\Routing\\Generator\\UrlGeneratorInterface&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;@translator&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;@crudlex.dataFactoryInterface&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;@crudlex.entityDefinitionFactoryInterface&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;@crudlex.fileSystem&quot;</span>
      <span class="p p-Indicator">-</span> <span class="s">&quot;@crudlex.entityDefinitionValidatorInterface&quot;</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U2lsZXggMg== container">
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$app-&gt;register(new CRUDlex\Silex\ServiceProvider(), [</span>
<span class="x">    &#39;crud.file&#39; =&gt; __DIR__ . &#39;&lt;yourCrud.yml&gt;&#39;,</span>
<span class="x">    &#39;crud.datafactory&#39; =&gt; $dataFactory</span>
<span class="x">]);</span>
</pre></div>
</div>
</div>
</div>
<p>The content of the crud.yml (or whatever you name it) will be discussed in the
next chapter.</p>
<p>Now itâs time to mount the Controller:</p>
<div class="sphinx-tabs container">
<div class="ui top attached tabular menu sphinx-menu container">
<div class="active item sphinx-data-tab-U3ltZm9ueSA0 container">
<div class="container">
Symfony 4</div>
</div>
<div class="item sphinx-data-tab-U2lsZXggMg== container">
<div class="container">
Silex 2</div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U3ltZm9ueSA0 active container">
<p>The routes have to be added to the <em>config/routes.yaml</em>:</p>
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">crudlex:</span>
<span class="x">    resource: &#39;@CRUDlexSymfony4Bundle/Resources/config/routes.yaml&#39;</span>
<span class="x">    prefix: /crud</span>
</pre></div>
</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-U2lsZXggMg== container">
<div class="highlight-php notranslate"><div class="highlight"><pre><span></span><span class="x">$app-&gt;boot();</span>
<span class="x">$app-&gt;mount(&#39;/crud&#39;, new CRUDlex\Silex\ControllerProvider());</span>
</pre></div>
</div>
</div>
</div>
<p>It has to happen after the application has been booted as some access to service providers happen inside.
And thatâs it. Your CRUD UI should be available now, for example if you
defined a book entity in the crud.yml:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">http</span><span class="p">:</span><span class="o">//.../</span><span class="n">crud</span><span class="o">/</span><span class="n">book</span>
</pre></div>
</div>
<p>You can override the used Controller instance in order to customize the behaviour. Simply extend from CRUDlexController
and adjust or implement CRUDlexControllerInterface. Then instantiate your class and set $app[âcrud.controllerâ] with
it before mounting.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="datastructures.html" class="btn btn-neutral float-right" title="Data Structure Definition" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="introduction.html" class="btn btn-neutral" title="Introduction" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Philip Lehmann-BÃ¶hm.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.15.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/sphinx_tabs/tabs.js"></script>
      <script type="text/javascript" src="../_static/sphinx_tabs/semantic-ui-2.2.10/tab.min.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>